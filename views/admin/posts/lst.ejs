<%- include('../../cabecalho.ejs') %>
<style>
    .posts-admin-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 0;
    }

    .posts-admin-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        gap: 15px;
    }

    .posts-admin-header a {
        color: #E53935;
        text-decoration: none;
        font-weight: 600;
        padding: 10px 15px;
        border-radius: 999px;
        transition: 0.2s;
    }

    .posts-admin-header a:hover {
        background: rgba(229, 57, 53, 0.1);
        color: #F9A825;
    }

    .posts-admin-header h1 {
        margin: 0;
        flex: 1;
        background: linear-gradient(90deg, #E53935, #F9A825);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-size: 28px;
    }

    .posts-admin-search {
        margin-bottom: 25px;
        display: flex;
        gap: 10px;
    }

    .posts-admin-search input {
        flex: 1;
        padding: 12px 14px;
        border: 2px solid rgba(229, 57, 53, 0.4);
        border-radius: 14px;
        font-size: 14px;
        transition: 0.2s;
    }

    .posts-admin-search input:focus {
        outline: none;
        border-color: #E53935;
        box-shadow: 0 0 0 3px rgba(249, 168, 37, 0.15);
    }

    .posts-admin-search button {
        padding: 12px 25px;
        background: linear-gradient(90deg, #E53935, #F9A825);
        color: white;
        border: none;
        border-radius: 999px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.2s;
        box-shadow: 0 8px 20px rgba(229, 57, 53, 0.3);
    }

    .posts-admin-search button:hover {
        transform: translateY(-1px) scale(1.01);
        opacity: 0.9;
    }

    .posts-admin-grid {
        display: grid;
        gap: 15px;
    }

    .post-card {
        background: rgba(255, 255, 255, 0.95);
        border: 1px solid rgba(229, 57, 53, 0.25);
        border-radius: 16px;
        padding: 20px;
        transition: all 0.2s ease;
        box-shadow: 0 5px 15px rgba(229, 57, 53, 0.08);
    }

    .post-card:hover {
        box-shadow: 0 10px 30px rgba(229, 57, 53, 0.15);
        transform: translateY(-2px);
        border-color: rgba(229, 57, 53, 0.35);
    }

    .post-card-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin: 0 0 8px 0;
    }

    .post-card-artist {
        font-size: 13px;
        color: #E53935;
        margin-bottom: 10px;
        font-weight: 600;
    }

    .post-card-artes {
        font-size: 13px;
        color: #666;
        margin-bottom: 15px;
        padding: 8px 12px;
        background: rgba(249, 168, 37, 0.08);
        border-radius: 8px;
        border-left: 3px solid #F9A825;
    }

    .post-card-actions {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
    }

    .post-card-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        font-weight: 600;
        transition: 0.2s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 5px;
    }

    .post-card-btn.edit {
        background: rgba(249, 168, 37, 0.15);
        color: #F9A825;
    }

    .post-card-btn.edit:hover {
        background: rgba(249, 168, 37, 0.25);
    }

    .post-card-btn.delete {
        background: rgba(198, 40, 40, 0.15);
        color: #C62828;
    }

    .post-card-btn.delete:hover {
        background: rgba(198, 40, 40, 0.25);
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #999;
    }

    .empty-state p {
        font-size: 15px;
        margin: 10px 0;
    }
</style>

<div class="posts-admin-container">
    <div class="posts-admin-header">
        <a href="/admin">‚Üê Voltar</a>
        <h1>Posts</h1>
        <a href="/admin/posts/add" style="background: linear-gradient(90deg, #E53935, #F9A825); color: white; box-shadow: 0 8px 20px rgba(229, 57, 53, 0.3);">+ Novo</a>
    </div>

    <div class="posts-admin-search">
        <form method="get" action="/admin/posts/lst" style="display: flex; gap: 10px; width: 100%;">
            <input type="text" name="busca" placeholder="Pesquisar por T√≠tulo ou Artista" value="<%= typeof busca !== 'undefined' ? busca : '' %>">
            <button type="submit">Buscar</button>
        </form>
    </div>

    <% if (Posts && Posts.length > 0) { %>
        <div class="posts-admin-grid">
            <% Posts.forEach(post => { %>
                <div class="post-card">
                    <h3 class="post-card-title"><%= post.titulo %></h3>
                    <div class="post-card-artist">üë§ <%= post.artista %></div>
                    <% if (post.artes && post.artes.length > 0) { %>
                        <div class="post-card-artes">
                            üé® <%= post.artes.join(', ') %>
                        </div>
                    <% } %>
                    <div class="post-card-actions">
                        <a href="/admin/posts/edt/<%= post._id %>" class="btn edit">Editar</a>
                        <a href="#" class="btn delete" onclick="event.preventDefault(); openGlobalConfirm('/admin/posts/del/<%= post._id %>', 'Tem certeza que deseja deletar este post?')">Deletar</a>
                    </div>
                </div>
            <% }) %>
        </div>
    <% } else { %>
        <div class="empty-state">
            <p>Nenhum post encontrado</p>
            <p style="color: #ccc; font-size: 13px;">Crie um novo post para come√ßar</p>
        </div>
    <% } %>
</div>

<%- include('../../rodape.ejs') %>
